import{d as x,c as w,q as A,z as L,D as T,b as c,f as a,C as f,A as r,B as n,y as g,F as k,x as V,l as d,p as B,E as C,o as u,h as D,i as K}from"./index-fPpdgeJo.js";const E={class:"editor-page"},U={class:"container page"},M={class:"row"},S={class:"col-md-10 offset-md-1 col-xs-12"},$={class:"form-group"},F={class:"form-group"},N={class:"form-group"},R={class:"form-group"},W=["onKeypress"],q={class:"tag-list"},z=["aria-label","onClick","onKeypress"],P=["disabled"],H=x({__name:"EditArticle",setup(j){const b=B(),h=C(),l=w(()=>b.params.slug),t=A({title:"",description:"",body:"",tagList:[]}),i=L("");function p(){t.tagList.push(i.value.trim()),i.value=""}function m(o){t.tagList=t.tagList.filter(e=>e!==o)}async function y(o){const e=await d.articles.getArticle(o).then(s=>s.data.article);t.title=e.title,t.description=e.description,t.body=e.body,t.tagList=e.tagList}T(async()=>{l.value&&await y(l.value)});async function _(){let o;return l.value?o=await d.articles.updateArticle(l.value,{article:t}).then(e=>e.data.article):o=await d.articles.createArticle({article:t}).then(e=>e.data.article),h.push({name:"article",params:{slug:o.slug}})}return(o,e)=>(u(),c("div",E,[a("div",U,[a("div",M,[a("div",S,[a("form",{onSubmit:f(_,["prevent"])},[a("fieldset",$,[r(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.title=s),"aria-label":"Title",type:"text",class:"form-control form-control-lg",placeholder:"Article Title"},null,512),[[n,t.title]])]),a("fieldset",F,[r(a("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>t.description=s),"aria-label":"Description",type:"text",class:"form-control form-control-lg",placeholder:"What's this article about?"},null,512),[[n,t.description]])]),a("fieldset",N,[r(a("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.body=s),"aria-label":"Body",rows:8,class:"form-control",placeholder:"Write your article (in markdown)"},null,512),[[n,t.body]])]),a("fieldset",R,[r(a("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.value=s),"aria-label":"Tags",type:"text",class:"form-control",placeholder:"Enter tags",onChange:p,onKeypress:g(f(p,["prevent"]),["enter"])},null,40,W),[[n,i.value]]),a("div",q,[(u(!0),c(k,null,V(t.tagList,s=>(u(),c("span",{key:s,class:"tag-default tag-pill"},[a("i",{role:"button",tabindex:"0","aria-label":`Delete tag: ${s}`,class:"ion-close-round",onClick:v=>m(s),onKeypress:g(v=>m(s),["enter"])},null,40,z),D(" "+K(s),1)]))),128))])]),a("button",{class:"btn btn-lg pull-xs-right btn-primary",type:"submit",disabled:!(t.title&&t.description&&t.body)}," Publish Article ",8,P)],32)])])])]))}});export{H as default};
