import{d as h,q as y,u as v,z as U,D as x,m as d,c as S,b as m,f as t,F as B,x as V,C as k,A as n,B as i,o as c,i as f,l as D,G as C}from"./index-fPpdgeJo.js";const E={class:"settings-page"},F={class:"container page"},L={class:"row"},A={class:"col-md-6 offset-md-3 col-xs-12"},M={class:"error-messages"},N={class:"form-group"},O={class:"form-group"},j={class:"form-group"},z={class:"form-group"},Y={class:"form-group"},q=["disabled"],R=h({__name:"Settings",setup(G){const o=y({}),a=v(),u=U();async function g(){var l;u.value={};try{const e=Object.entries(o).reduce((r,[_,p])=>p===null?r:Object.assign(r,{[_]:p}),{}),s=await D.user.updateCurrentUser({user:e}).then(r=>r.data.user);a.updateUser(s),await d("profile",{username:s.username})}catch(e){C(e)&&(u.value=(l=e.error)==null?void 0:l.errors)}}async function b(){a.updateUser(null),await d("global-feed")}x(async()=>{var l,e,s,r;if(!a.isAuthorized)return await d("login");o.image=(l=a.user)==null?void 0:l.image,o.username=(e=a.user)==null?void 0:e.username,o.bio=(s=a.user)==null?void 0:s.bio,o.email=(r=a.user)==null?void 0:r.email});const w=S(()=>{var l,e,s,r;return o.image===((l=a.user)==null?void 0:l.image)&&o.username===((e=a.user)==null?void 0:e.username)&&o.bio===((s=a.user)==null?void 0:s.bio)&&o.email===((r=a.user)==null?void 0:r.email)&&!o.password});return(l,e)=>(c(),m("div",E,[t("div",F,[t("div",L,[t("div",A,[e[5]||(e[5]=t("h1",{class:"text-xs-center"}," Your Settings ",-1)),t("ul",M,[(c(!0),m(B,null,V(u.value,(s,r)=>(c(),m("li",{key:r},f(r)+" "+f(s?s[0]:""),1))),128))]),t("form",{onSubmit:k(g,["prevent"])},[t("fieldset",null,[t("fieldset",N,[n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.image=s),"aria-label":"Avatar picture url",type:"text",class:"form-control",placeholder:"URL of profile picture"},null,512),[[i,o.image]])]),t("fieldset",O,[n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.username=s),"aria-label":"Username",type:"text",class:"form-control form-control-lg",placeholder:"Your name"},null,512),[[i,o.username]])]),t("fieldset",j,[n(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.bio=s),"aria-label":"Bio",class:"form-control form-control-lg",rows:8,placeholder:"Short bio about you"},null,512),[[i,o.bio]])]),t("fieldset",z,[n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.email=s),"aria-label":"Email",type:"email",class:"form-control form-control-lg",placeholder:"Email"},null,512),[[i,o.email]])]),t("fieldset",Y,[n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.password=s),"aria-label":"New password",type:"password",class:"form-control form-control-lg",placeholder:"New password"},null,512),[[i,o.password]])]),t("button",{class:"btn btn-lg btn-primary pull-xs-right",disabled:w.value,type:"submit"}," Update Settings ",8,q)])],32),e[6]||(e[6]=t("hr",null,null,-1)),t("button",{class:"btn btn-outline-danger","aria-label":"Logout",onClick:b}," Or click here to logout. ")])])])]))}});export{R as default};
